<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ê²Œì„ ëª©ë¡ - Private Game Platform</title>
    <link rel="stylesheet" href="./css/games-list.css" />
    <link rel="stylesheet" href="/common.css" />
    <script src="js/client_common.js"></script>
  </head>
  <body>
    <!-- í—¤ë” -->
    <div id="header"></div>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <main class="main-content">
      <div class="container">
        <!-- í˜ì´ì§€ í—¤ë” -->
        <div class="page-header">
          <h1 class="page-title">ğŸ® ê²Œì„ ëª©ë¡</h1>
          <p class="page-description">ë‹¤ì–‘í•œ ê²Œì„ì„ ì¦ê²¨ë³´ì„¸ìš”!</p>
        </div>

        <!-- í†µê³„ ë°°ë„ˆ -->
        <div class="stats-banner">
          <div class="stat-item">
            <div class="stat-value">2</div>
            <div class="stat-label">ì „ì²´ ê²Œì„</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">2</div>
            <div class="stat-label">ìš´ì˜ ì¤‘</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">324</div>
            <div class="stat-label">ì˜¤ëŠ˜ í”Œë ˆì´</div>
          </div>
        </div>

        <!-- í•„í„° ì„¹ì…˜ -->
        <div class="filter-section">
          <span class="filter-label">í•„í„°:</span>
          <div class="filter-tabs">
            <div class="filter-tab active" onclick="filterGames('all')">
              ì „ì²´
            </div>
            <div class="filter-tab" onclick="filterGames('active')">
              ìš´ì˜ ì¤‘
            </div>
            <div class="filter-tab" onclick="filterGames('inactive')">
              ì ê²€ ì¤‘
            </div>
          </div>
        </div>

        <!-- ê²Œì„ ê·¸ë¦¬ë“œ -->
        <div class="games-grid" id="gamesGrid">
          <!-- ê²Œì„ ì¹´ë“œ 1: Dice (í™œì„±) -->
          <div
            class="game-card"
            data-game-no="1"
            data-status="active"
            onclick="playGame(1, 'Dice')"
          >
            <div class="game-header">
              <div>
                <div class="game-icon">ğŸ²</div>
              </div>
              <div class="game-status active">â— ìš´ì˜ ì¤‘</div>
            </div>

            <h3 class="game-name">Dice</h3>
            <p class="game-description">ì£¼ì‚¬ìœ„ í™€ì§ ê²Œì„</p>

            <div class="game-info">
              <div class="info-item">
                <div class="info-label">ê¸°ë³¸ ë°°ë‹¹ë¥ </div>
                <div class="info-value">1.95ë°°</div>
              </div>
              <div class="info-item">
                <div class="info-label">ê²Œì„ ë²ˆí˜¸</div>
                <div class="info-value">#1</div>
              </div>
            </div>

            <div class="game-actions" onclick="event.stopPropagation()">
              <button
                class="btn btn-primary btn-play"
                onclick="playGame(1, 'Dice')"
              >
                <span>ğŸ®</span>
                <span>ê²Œì„ ì‹œì‘</span>
              </button>
              <button
                class="btn btn-details"
                onclick="showGameDetails(1)"
                title="ìƒì„¸ë³´ê¸°"
              >
                â„¹ï¸
              </button>
            </div>
          </div>

          <!-- ê²Œì„ ì¹´ë“œ 2: Roulette (í™œì„±) -->
          <div
            class="game-card"
            data-game-no="2"
            data-status="active"
            onclick="playGame(2, 'Roulette')"
          >
            <div class="game-header">
              <div>
                <div class="game-icon">ğŸ¡</div>
              </div>
              <div class="game-status active">â— ìš´ì˜ ì¤‘</div>
            </div>

            <h3 class="game-name">Roulette</h3>
            <p class="game-description">ë£°ë › ìˆ«ì ë§ì¶”ê¸°</p>

            <div class="game-info">
              <div class="info-item">
                <div class="info-label">ê¸°ë³¸ ë°°ë‹¹ë¥ </div>
                <div class="info-value">2.50ë°°</div>
              </div>
              <div class="info-item">
                <div class="info-label">ê²Œì„ ë²ˆí˜¸</div>
                <div class="info-value">#2</div>
              </div>
            </div>

            <div class="game-actions" onclick="event.stopPropagation()">
              <button
                class="btn btn-primary btn-play"
                onclick="playGame(2, 'Roulette')"
              >
                <span>ğŸ®</span>
                <span>ê²Œì„ ì‹œì‘</span>
              </button>
              <button
                class="btn btn-details"
                onclick="showGameDetails(2)"
                title="ìƒì„¸ë³´ê¸°"
              >
                â„¹ï¸
              </button>
            </div>
          </div>
        </div>

        <!-- ë¹ˆ ìƒíƒœ (í•„í„°ë§ ì‹œ í‘œì‹œ) -->
        <div class="empty-state" id="emptyState" style="display: none">
          <div class="icon">ğŸ®</div>
          <h3>ê²Œì„ì´ ì—†ìŠµë‹ˆë‹¤</h3>
          <p>í•´ë‹¹ ì¡°ê±´ì— ë§ëŠ” ê²Œì„ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
        </div>
      </div>
    </main>

    <!-- ê²Œì„ ìƒì„¸ ëª¨ë‹¬ -->
    <div class="modal-overlay" id="gameDetailModal">
      <div class="modal">
        <div class="modal-header">
          <h3 class="modal-title" id="modalGameName">ê²Œì„ ìƒì„¸ ì •ë³´</h3>
        </div>
        <div class="modal-body">
          <div style="text-align: center; margin-bottom: var(--spacing-lg)">
            <div
              style="font-size: 80px; margin-bottom: var(--spacing-md)"
              id="modalGameIcon"
            >
              ğŸ²
            </div>
            <div class="badge badge-success" id="modalGameStatus">ìš´ì˜ ì¤‘</div>
          </div>

          <div
            style="
              padding: var(--spacing-md);
              background-color: var(--bg-tertiary);
              border-radius: var(--radius-md);
              margin-bottom: var(--spacing-lg);
            "
          >
            <p
              id="modalGameDescription"
              style="margin: 0; color: var(--text-secondary); line-height: 1.6"
            >
              ì£¼ì‚¬ìœ„ í™€ì§ ê²Œì„
            </p>
          </div>

          <div style="display: grid; gap: var(--spacing-md)">
            <div
              style="
                display: flex;
                justify-content: space-between;
                padding: var(--spacing-md);
                background-color: var(--bg-tertiary);
                border-radius: var(--radius-md);
              "
            >
              <span style="color: var(--text-secondary)">ê²Œì„ ë²ˆí˜¸</span>
              <span style="font-weight: 700" id="modalGameNo">#1</span>
            </div>
            <div
              style="
                display: flex;
                justify-content: space-between;
                padding: var(--spacing-md);
                background-color: var(--bg-tertiary);
                border-radius: var(--radius-md);
              "
            >
              <span style="color: var(--text-secondary)">ê¸°ë³¸ ë°°ë‹¹ë¥ </span>
              <span
                style="font-weight: 700; color: var(--accent-primary)"
                id="modalBaseRate"
                >1.95ë°°</span
              >
            </div>
            <div
              style="
                display: flex;
                justify-content: space-between;
                padding: var(--spacing-md);
                background-color: var(--bg-tertiary);
                border-radius: var(--radius-md);
              "
            >
              <span style="color: var(--text-secondary)">ë“±ë¡ì¼</span>
              <span style="font-weight: 700" id="modalCreatedAt"
                >2025.02.06</span
              >
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-outline" onclick="closeModal()">ë‹«ê¸°</button>
          <button class="btn btn-primary" id="modalPlayBtn">ê²Œì„ ì‹œì‘</button>
        </div>
      </div>
    </div>

    <!-- í‘¸í„° -->
    <footer class="footer">
      <div class="container">
        <p>&copy; 2025 Private Game Platform. All rights reserved.</p>
        <p>ë¬¸ì˜: support@pgp.com</p>
      </div>
    </footer>

    <script>
      // ê²Œì„ ë°ì´í„° (ì‹¤ì œë¡œëŠ” APIì—ì„œ ê°€ì ¸ì˜´)
      const gamesData = [
        {
          gameNo: 1,
          gameName: "Dice",
          description: "ì£¼ì‚¬ìœ„ í™€ì§ ê²Œì„",
          baseRate: 1.95,
          isActive: 1,
          createdAt: "2025-02-06",
          icon: "ğŸ²",
        },
        {
          gameNo: 2,
          gameName: "Roulette",
          description: "ë£°ë › ìˆ«ì ë§ì¶”ê¸°",
          baseRate: 2.5,
          isActive: 1,
          createdAt: "2025-02-06",
          icon: "ğŸ¡",
        },
      ];

      // ê²Œì„ í•„í„°ë§
      function filterGames(status) {
        // íƒ­ í™œì„±í™”
        document.querySelectorAll(".filter-tab").forEach((tab) => {
          tab.classList.remove("active");
        });
        event.target.classList.add("active");

        const gameCards = document.querySelectorAll(".game-card");
        const emptyState = document.getElementById("emptyState");
        let visibleCount = 0;

        gameCards.forEach((card) => {
          const cardStatus = card.dataset.status;

          if (status === "all") {
            card.style.display = "block";
            visibleCount++;
          } else if (status === "active" && cardStatus === "active") {
            card.style.display = "block";
            visibleCount++;
          } else if (status === "inactive" && cardStatus === "inactive") {
            card.style.display = "block";
            visibleCount++;
          } else {
            card.style.display = "none";
          }
        });

        // ë¹ˆ ìƒíƒœ í‘œì‹œ
        if (visibleCount === 0) {
          emptyState.style.display = "block";
          document.querySelector(".games-grid").style.display = "none";
        } else {
          emptyState.style.display = "none";
          document.querySelector(".games-grid").style.display = "grid";
        }
      }

      // ê²Œì„ ì‹œì‘
      function playGame(gameNo, gameName) {
        // ì‹¤ì œë¡œëŠ” í•´ë‹¹ ê²Œì„ í˜ì´ì§€ë¡œ ì´ë™
        console.log(`ê²Œì„ ì‹œì‘: ${gameName} (${gameNo})`);

        if (gameName === "Dice") {
          window.location.href = "game.html";
        } else {
          alert(`${gameName} ê²Œì„ í˜ì´ì§€ëŠ” ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.`);
        }
      }

      // ê²Œì„ ìƒì„¸ ë³´ê¸°
      function showGameDetails(gameNo) {
        const game = gamesData.find((g) => g.gameNo === gameNo);

        if (!game) return;

        // ëª¨ë‹¬ ë‚´ìš© ì—…ë°ì´íŠ¸
        document.getElementById("modalGameName").textContent = game.gameName;
        document.getElementById("modalGameIcon").textContent = game.icon;
        document.getElementById("modalGameDescription").textContent =
          game.description;
        document.getElementById("modalGameNo").textContent = "#" + game.gameNo;
        document.getElementById("modalBaseRate").textContent =
          game.baseRate + "ë°°";
        document.getElementById("modalCreatedAt").textContent = game.createdAt;

        const statusBadge = document.getElementById("modalGameStatus");
        if (game.isActive === 1) {
          statusBadge.className = "badge badge-success";
          statusBadge.textContent = "ìš´ì˜ ì¤‘";
        } else {
          statusBadge.className = "badge badge-danger";
          statusBadge.textContent = "ì ê²€ ì¤‘";
        }

        // ê²Œì„ ì‹œì‘ ë²„íŠ¼
        document.getElementById("modalPlayBtn").onclick = () => {
          closeModal();
          playGame(game.gameNo, game.gameName);
        };

        // ëª¨ë‹¬ í‘œì‹œ
        document.getElementById("gameDetailModal").classList.add("active");
      }

      // ëª¨ë‹¬ ë‹«ê¸°
      function closeModal() {
        document.getElementById("gameDetailModal").classList.remove("active");
      }

      // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
      document
        .getElementById("gameDetailModal")
        .addEventListener("click", function (e) {
          if (e.target === this) {
            closeModal();
          }
        });

      // ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” APIë¡œ ê²Œì„ ëª©ë¡ ë¡œë“œ
      // fetchGames();
      // async function fetchGames() {
      //   try {
      //     const response = await fetch('/api/games');
      //     const games = await response.json();
      //     renderGames(games);
      //   } catch (error) {
      //     console.error('ê²Œì„ ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', error);
      //   }
      // }
    </script>
  </body>
</html>
